# ChoreoMarker

ChoreoMarker is a choreography marking tool for dance rehearsals, designed to help dancers and choreographers mark timings and sections during practice sessions.

## Architecture

Unlike the main Karayogam site, ChoreoMarker is a **React single-page application** built with:
- **React 18** - UI framework
- **Vite** - Build tool and dev server
- **Lucide React** - Icon library
- **Tailwind CSS** - Styling (via CDN in dev, bundled in production)
- **PWA Support** - Installable as a Progressive Web App

## Local Development

### Prerequisites
- Node.js (v18 or higher)
- npm

### Setup and Run

1. **Install dependencies**:
   ```bash
   cd choreo
   npm install
   ```

2. **Start development server**:
   ```bash
   npm run dev
   ```
   The app will be available at `http://localhost:5173/choreo/`

3. **Preview production build**:
   ```bash
   npm run preview
   ```

## Building for Production

The app must be built before deployment:

```bash
cd choreo
npm run build
```

This creates optimized files in the `choreo/dist/` directory.

## Deployment Issue & Fix

**IMPORTANT**: GitHub Pages serves source files by default, but the app needs the built files from `dist/`.

### The Problem
- Production site serves `choreo/index.html` (source file with Vite dev setup)
- Should serve `choreo/dist/index.html` (built bundle)
- This causes errors: "require is not defined", Tailwind CDN warnings, etc.

### Solution Options

**Option 1: Copy dist contents after build** (Recommended)
```bash
cd choreo
npm run build
# Remove old files (keep src/ and build config)
rm -f index.html
# Copy dist contents to choreo root
cp -r dist/* .
git add .
git commit -m "Deploy choreo build"
git push
```

**Option 2: Configure GitHub Actions to build and deploy**
Create `.github/workflows/deploy-choreo.yml` to automatically build and deploy the choreo app when changes are pushed.

**Option 3: Use separate gh-pages branch**
Configure GitHub Pages to serve from a `gh-pages` branch containing only the built files.

## File Structure

```
choreo/
├── src/
│   ├── App.jsx          # Main React component
│   └── main.jsx         # React entry point
├── dist/                # Built files (generated by npm run build)
│   ├── index.html       # Production HTML
│   └── assets/          # Bundled JS/CSS
├── index.html           # Dev template (DO NOT deploy this)
├── package.json         # Dependencies and scripts
├── vite.config.js       # Vite configuration (base: '/choreo/')
└── README.md            # This file
```

## Key Configuration

- **Base Path**: Set to `/choreo/` in `vite.config.js` for proper GitHub Pages routing
- **Build Output**: `dist/` directory
- **Service Worker**: Registered at `/sw.js` for PWA functionality

## Troubleshooting

### Blank page on production
- Ensure built files from `dist/` are deployed, not source files
- Check browser console for errors
- Verify `/choreo/assets/` files are accessible

### Assets not loading
- Check that `base: '/choreo/'` is set in `vite.config.js`
- Ensure asset paths in built HTML are correct (`/choreo/assets/...`)

### Service Worker errors
- Service worker expects to be at root (`/sw.js`)
- May need to adjust path or create a copy at root level
